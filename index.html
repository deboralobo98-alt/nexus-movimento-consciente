<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nexus Fisioterapia - Especialistas em Reabilita√ß√£o | Florian√≥polis/SC</title>
    <meta name="description" content="Cl√≠nica especializada em fisioterapia esportiva, reabilita√ß√£o de ombro, coluna e quadril em Florian√≥polis/SC. Atendimento humanizado com t√©cnicas modernas. Agende sua consulta!" />
    <meta name="author" content="Nexus Fisioterapia" />
    <meta name="keywords" content="fisioterapia, fisioterapia esportiva, reabilita√ß√£o, ombro, coluna, quadril, Florian√≥polis, SC, fisioterapeuta" />

    <meta property="og:title" content="Nexus Fisioterapia - Especialistas em Reabilita√ß√£o | Florian√≥polis/SC" />
    <meta property="og:description" content="Movimento √© vida, cuide do seu corpo com quem entende. Especialistas em fisioterapia esportiva e reabilita√ß√£o em Florian√≥polis/SC." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PPTQ79WN');</script>
    <!-- End Google Tag Manager -->
  </head>
  
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PPTQ79WN"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div id="root"></div>

    <script src="https://unpkg.com/iframe-resizer/js/iframeResizer.contentWindow.min.js"></script>

    <script type="module" src="/src/main.tsx"></script>

    <!-- Enhanced Event Tracking Script -->
    <script>
    window.addEventListener('load', function() {
      console.log('üîç Iniciando rastreamento de eventos...');
      
      // Fun√ß√£o para adicionar listeners aos elementos
      function addEventListeners() {
        // Encontrar todos os bot√µes e links
        const elements = document.querySelectorAll('button, a, [role="button"]');
        
        elements.forEach(function(element) {
          const text = element.textContent.toLowerCase();
          const hasWhatsApp = text.includes('whatsapp');
          const hasPhone = text.includes('telefone') || text.includes('ligar') || text.includes('phone');
          const hasAppointment = text.includes('agendar') || text.includes('consulta') || text.includes('appointment');
          
          // Se o elemento j√° tem listener, pular
          if (element.dataset.tracked) return;
          
          if (hasWhatsApp || hasPhone || hasAppointment) {
            element.dataset.tracked = 'true';
            
            element.addEventListener('click', function(e) {
              console.log('üéØ Clique detectado:', element.textContent.trim());
              
              let eventName = 'click_event';
              let eventLabel = 'generic_click';
              
              if (hasWhatsApp) {
                eventName = 'whatsapp_click';
                eventLabel = 'botao_whatsapp';
              } else if (hasPhone) {
                eventName = 'phone_click';
                eventLabel = 'botao_telefone';
              } else if (hasAppointment) {
                eventName = 'appointment_click';
                eventLabel = 'botao_agendamento';
              }
              
              // Enviar para GA4
              if (typeof gtag !== 'undefined') {
                gtag('event', eventName, {
                  'event_category': 'engagement',
                  'event_label': eventLabel,
                  'page_location': window.location.href,
                  'button_text': element.textContent.trim()
                });
                console.log('‚úÖ Evento enviado para GA4:', eventName);
              }
              
              // Enviar para dataLayer do GTM
              if (typeof window.dataLayer !== 'undefined') {
                window.dataLayer.push({
                  'event': eventName,
                  'event_category': 'engagement',
                  'event_label': eventLabel,
                  'button_text': element.textContent.trim(),
                  'page_location': window.location.href
                });
                console.log('‚úÖ Evento enviado para dataLayer:', eventName);
              } else {
                console.warn('‚ö†Ô∏è dataLayer n√£o encontrado');
              }
            });
            
            console.log('üëÇ Listener adicionado:', element.textContent.trim());
          }
        });
      }
      
      // Adicionar listeners inicialmente ap√≥s um delay
      setTimeout(function() {
        console.log('‚è±Ô∏è Primeira varredura de elementos...');
        addEventListeners();
      }, 2000);
      
      // Observar mudan√ßas no DOM para capturar elementos adicionados dinamicamente
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.addedNodes.length) {
            addEventListeners();
          }
        });
      });
      
      // Iniciar observa√ß√£o do DOM
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
      
      console.log('‚úÖ Observador de DOM iniciado');
    });
    </script>
  </body>
</html>
