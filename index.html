<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nexus Fisioterapia - Especialistas em ReabilitaÃ§Ã£o | FlorianÃ³polis/SC</title>
    <meta name="description" content="ClÃ­nica especializada em fisioterapia esportiva, reabilitaÃ§Ã£o de ombro, coluna e quadril em FlorianÃ³polis/SC. Atendimento humanizado com tÃ©cnicas modernas. Agende sua consulta!" />
    <meta name="author" content="Nexus Fisioterapia" />
    <meta name="keywords" content="fisioterapia, fisioterapia esportiva, reabilitaÃ§Ã£o, ombro, coluna, quadril, FlorianÃ³polis, SC, fisioterapeuta" />

    <meta property="og:title" content="Nexus Fisioterapia - Especialistas em ReabilitaÃ§Ã£o | FlorianÃ³polis/SC" />
    <meta property="og:description" content="Movimento Ã© vida, cuide do seu corpo com quem entende. Especialistas em fisioterapia esportiva e reabilitaÃ§Ã£o em FlorianÃ³polis/SC." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PPTQ79WN');</script>
    <!-- End Google Tag Manager -->
  </head>
  
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PPTQ79WN"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Enhanced Click Tracker for GTM -->
    <script>
    console.log('ðŸš€ Inicializando rastreador de cliques...');
    
    document.addEventListener('click', function(e) {
      console.log('ðŸ” Clique detectado em:', e.target);
      
      var clickedElement = e.target;
      var whatsappLink = null;
      var phoneLink = null;
      var isWhatsAppRelated = false;
      var isPhoneRelated = false;
      var isAppointmentRelated = false;
      
      // Percorrer a Ã¡rvore DOM do elemento clicado atÃ© o topo
      var el = clickedElement;
      while (el && el !== document) {
        var text = (el.textContent || '').toLowerCase();
        var href = '';
        
        // Obter href de forma segura
        if (el.getAttribute) {
          href = el.getAttribute('href') || '';
        }
        
        // Verificar se Ã© link do WhatsApp
        if (href.indexOf('wa.me') > -1 || href.indexOf('api.whatsapp.com') > -1) {
          whatsappLink = href;
          isWhatsAppRelated = true;
          console.log('ðŸ“± Link WhatsApp encontrado:', href);
        }
        
        // Verificar se Ã© link de telefone
        if (href.indexOf('tel:') > -1) {
          phoneLink = href;
          isPhoneRelated = true;
          console.log('ðŸ“ž Link telefone encontrado:', href);
        }
        
        // Verificar pelo texto do elemento
        if (text.includes('whatsapp')) {
          isWhatsAppRelated = true;
          console.log('ðŸ“± Texto WhatsApp encontrado');
        }
        
        if (text.includes('telefone') || text.includes('ligar') || text.includes('phone')) {
          isPhoneRelated = true;
          console.log('ðŸ“ž Texto telefone encontrado');
        }
        
        if (text.includes('agendar') || text.includes('consulta') || text.includes('appointment')) {
          isAppointmentRelated = true;
          console.log('ðŸ“… Texto agendamento encontrado');
        }
        
        el = el.parentNode;
      }
      
      // Inicializar dataLayer se nÃ£o existir
      window.dataLayer = window.dataLayer || [];
      
      // Enviar evento para WhatsApp
      if (isWhatsAppRelated) {
        console.log('âœ… ENVIANDO EVENTO: click_whatsapp');
        window.dataLayer.push({
          event: 'click_whatsapp',
          event_category: 'engagement',
          event_label: 'botao_whatsapp',
          link_url: whatsappLink || 'no_direct_link',
          link_text: (clickedElement.textContent || '').trim(),
          page_location: window.location.href
        });
        console.log('ðŸ“Š Evento click_whatsapp enviado para dataLayer');
      }
      
      // Enviar evento para telefone
      if (isPhoneRelated && !isWhatsAppRelated) {
        console.log('âœ… ENVIANDO EVENTO: click_phone');
        window.dataLayer.push({
          event: 'click_phone',
          event_category: 'engagement',
          event_label: 'botao_telefone',
          link_url: phoneLink || 'no_direct_link',
          link_text: (clickedElement.textContent || '').trim(),
          page_location: window.location.href
        });
        console.log('ðŸ“Š Evento click_phone enviado para dataLayer');
      }
      
      // Enviar evento para agendamento
      if (isAppointmentRelated && !isWhatsAppRelated && !isPhoneRelated) {
        console.log('âœ… ENVIANDO EVENTO: click_appointment');
        window.dataLayer.push({
          event: 'click_appointment',
          event_category: 'engagement',
          event_label: 'botao_agendamento',
          link_text: (clickedElement.textContent || '').trim(),
          page_location: window.location.href
        });
        console.log('ðŸ“Š Evento click_appointment enviado para dataLayer');
      }
      
      // Mostrar estado atual do dataLayer
      if (isWhatsAppRelated || isPhoneRelated || isAppointmentRelated) {
        console.log('ðŸ“Š dataLayer atual:', window.dataLayer);
      }
      
    }, true);
    
    console.log('âœ… Rastreador de cliques ativo');
    </script>
    
    <div id="root"></div>

    <script src="https://unpkg.com/iframe-resizer/js/iframeResizer.contentWindow.min.js"></script>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
